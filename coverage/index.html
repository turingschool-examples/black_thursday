<!DOCTYPE html>
<html xmlns='http://www.w3.org/1999/xhtml'>
  <head>
    <title>Code coverage for Black thursday</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <script src='./assets/0.12.3/application.js' type='text/javascript'></script>
    <link href='./assets/0.12.3/application.css' media='screen, projection, print' rel='stylesheet' type='text/css' />
    <link rel="shortcut icon" type="image/png" href="./assets/0.12.3/favicon_red.png" />
    <link rel="icon" type="image/png" href="./assets/0.12.3/favicon.png" />
  </head>

  <body>
    <div id="loading">
      <img src="./assets/0.12.3/loading.gif" alt="loading"/>
    </div>
    <div id="wrapper" class="hide">
      <div class="timestamp">Generated <abbr class="timeago" title="2021-01-12T08:54:08-05:00">2021-01-12T08:54:08-05:00</abbr></div>
      <ul class="group_tabs"></ul>

      <div id="content">
        <div class="file_list_container" id="AllFiles">
  <h2>
    <span class="group_name">All Files</span>
    (<span class="covered_percent">
      <span class="red">
  74.27%
</span>

     </span>
     covered at
     <span class="covered_strength">
       <span class="green">
         87733.32
       </span>
    </span> hits/line
    )
  </h2>

  <a name="AllFiles"></a>

  <div>
    <b>15</b> files in total.
  </div>

  <div class="t-line-summary">
    <b>478</b> relevant lines,
    <span class="green"><b>355</b> lines covered</span> and
    <span class="red"><b>123</b> lines missed. </span>
    (<span class="red">
  74.27%
</span>
)
  </div>

  

  <div class="file_list--responsive">
    <table class="file_list">
      <thead>
        <tr>
          <th>File</th>
          <th class="cell--number">% covered</th>
          <th class="cell--number">Lines</th>
          <th class="cell--number">Relevant Lines</th>
          <th class="cell--number">Lines covered</th>
          <th class="cell--number">Lines missed</th>
          <th class="cell--number">Avg. Hits / Line</th>
          
        </tr>
      </thead>
      <tbody>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#c22eea3842ddfac8d6c29df1d34ea777aed94ea1" class="src_link" title="lib/customer.rb">lib/customer.rb</a></td>
            <td class="red strong cell--number t-file__coverage">78.57 %</td>
            <td class="cell--number">26</td>
            <td class="cell--number">14</td>
            <td class="cell--number">11</td>
            <td class="cell--number">3</td>
            <td class="cell--number">13000.29</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#1ed569b33ab2d293a33e899129cff6d693bb3eba" class="src_link" title="lib/customer_repository.rb">lib/customer_repository.rb</a></td>
            <td class="red strong cell--number t-file__coverage">52.38 %</td>
            <td class="cell--number">70</td>
            <td class="cell--number">42</td>
            <td class="cell--number">22</td>
            <td class="cell--number">20</td>

            <td class="cell--number">623.12</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#09d0202a77786c7ec68e9f487c2b1e886f13cb99" class="src_link" title="lib/invoice.rb">lib/invoice.rb</a></td>
            <td class="yellow strong cell--number t-file__coverage">84.62 %</td>
            <td class="cell--number">25</td>
            <td class="cell--number">13</td>
            <td class="cell--number">11</td>
            <td class="cell--number">2</td>
            <td class="cell--number">69790.31</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#1a9732cc8a46956025c86263d8bc21a00675b695" class="src_link" title="lib/invoice_item.rb">lib/invoice_item.rb</a></td>
            <td class="red strong cell--number t-file__coverage">77.78 %</td>
            <td class="cell--number">32</td>
            <td class="cell--number">18</td>
            <td class="cell--number">14</td>
            <td class="cell--number">4</td>

            <td class="cell--number">283790.28</td>

            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#d645afdb60aeb4090e163ecb1619c47a69681ba0" class="src_link" title="lib/invoice_item_repository.rb">lib/invoice_item_repository.rb</a></td>
            <td class="red strong cell--number t-file__coverage">54.55 %</td>
            <td class="cell--number">73</td>
            <td class="cell--number">44</td>
            <td class="cell--number">24</td>
            <td class="cell--number">20</td>

            <td class="cell--number">12903.48</td>

            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#84a36ae3489df4f40c3b3ce84abf434d324403f9" class="src_link" title="lib/invoice_repository.rb">lib/invoice_repository.rb</a></td>
            <td class="red strong cell--number t-file__coverage">75.00 %</td>
            <td class="cell--number">58</td>
            <td class="cell--number">36</td>
            <td class="cell--number">27</td>
            <td class="cell--number">9</td>
            <td class="cell--number">464533.06</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#9c278b9ebdc636430aab0585aee6544de728954f" class="src_link" title="lib/item.rb">lib/item.rb</a></td>
            <td class="red strong cell--number t-file__coverage">77.27 %</td>
            <td class="cell--number">38</td>
            <td class="cell--number">22</td>
            <td class="cell--number">17</td>
            <td class="cell--number">5</td>
            <td class="cell--number">14540.27</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#d0e1bb360b3f36810285081b22454984efafe766" class="src_link" title="lib/item_repository.rb">lib/item_repository.rb</a></td>
            <td class="red strong cell--number t-file__coverage">63.41 %</td>
            <td class="cell--number">73</td>
            <td class="cell--number">41</td>
            <td class="cell--number">26</td>
            <td class="cell--number">15</td>
            <td class="cell--number">286215.88</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#cff247e2de2482271b9b31960c2f09c57a6cc16d" class="src_link" title="lib/merchant.rb">lib/merchant.rb</a></td>
            <td class="yellow strong cell--number t-file__coverage">87.50 %</td>
            <td class="cell--number">16</td>
            <td class="cell--number">8</td>
            <td class="cell--number">7</td>
            <td class="cell--number">1</td>
            <td class="cell--number">4631.75</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#b6c86694a1542b5532d474dcedc3aeb6826a8219" class="src_link" title="lib/merchant_repository.rb">lib/merchant_repository.rb</a></td>
            <td class="red strong cell--number t-file__coverage">72.00 %</td>
            <td class="cell--number">50</td>
            <td class="cell--number">25</td>
            <td class="cell--number">18</td>
            <td class="cell--number">7</td>
            <td class="cell--number">500.68</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#ec5414214a7d1d7a73e108244c6f8e47f8b07776" class="src_link" title="lib/repository_module.rb">lib/repository_module.rb</a></td>
            <td class="red strong cell--number t-file__coverage">55.56 %</td>
            <td class="cell--number">33</td>
            <td class="cell--number">18</td>
            <td class="cell--number">10</td>
            <td class="cell--number">8</td>
            <td class="cell--number">801.00</td>
            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#d77ecadd5d5c6c1d595120587d4f46f78fe9cb92" class="src_link" title="lib/sales_analyst.rb">lib/sales_analyst.rb</a></td>

            <td class="green strong cell--number t-file__coverage">98.23 %</td>
            <td class="cell--number">199</td>
            <td class="cell--number">113</td>
            <td class="cell--number">111</td>
            <td class="cell--number">2</td>
            <td class="cell--number">44306.95</td>

            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#c37d665d94663d096e5ec6508dbc9d2acf73bb01" class="src_link" title="lib/sales_engine.rb">lib/sales_engine.rb</a></td>

            <td class="green strong cell--number t-file__coverage">100.00 %</td>
            <td class="cell--number">34</td>
            <td class="cell--number">21</td>
            <td class="cell--number">21</td>
            <td class="cell--number">0</td>
            <td class="cell--number">10.52</td>

            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#57257d889fbc05552326bfb53e1574c95f376825" class="src_link" title="lib/transaction.rb">lib/transaction.rb</a></td>
            <td class="red strong cell--number t-file__coverage">76.47 %</td>
            <td class="cell--number">29</td>
            <td class="cell--number">17</td>
            <td class="cell--number">13</td>
            <td class="cell--number">4</td>

            <td class="cell--number">68617.29</td>

            
          </tr>
        
          <tr class="t-file">
            <td class="strong t-file__name"><a href="#c2130b102496dd67cf14334182df3c2805e31009" class="src_link" title="lib/transaction_repository.rb">lib/transaction_repository.rb</a></td>
            <td class="red strong cell--number t-file__coverage">50.00 %</td>
            <td class="cell--number">77</td>
            <td class="cell--number">46</td>
            <td class="cell--number">23</td>
            <td class="cell--number">23</td>

            <td class="cell--number">2821.35</td>

          </tr>
        
      </tbody>
    </table>
  </div>
</div>


        
      </div>

      <div id="footer">
        Generated by <a href="https://github.com/simplecov-ruby/simplecov">simplecov</a> v0.21.1
        and simplecov-html v0.12.3<br/>
        using Unit Tests
      </div>

      <div class="source_files">
      
        <div class="source_table" id="c22eea3842ddfac8d6c29df1d34ea777aed94ea1">
  <div class="header">
    <h3>lib/customer.rb</h3>
    <h4>
      <span class="red">
  78.57%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>14</b> relevant lines.
      <span class="green"><b>11</b> lines covered</span> and
      <span class="red"><b>3</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            <span class="hits">1</span>
            

            

            <code class="ruby">class Customer</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="2">
            <span class="hits">1</span>
            

            

            <code class="ruby">  attr_reader :id,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="3">
            
            

            

            <code class="ruby">              :first_name,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="4">
            
            

            

            <code class="ruby">              :last_name,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="5">
            
            

            

            <code class="ruby">              :created_at,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="6">
            
            

            

            <code class="ruby">              :updated_at,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="7">
            
            

            

            <code class="ruby">              :parent</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="8">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="9">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def initialize(args, parent)</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="26000" data-linenumber="10">
            <span class="hits">26000</span>

            

            

            <code class="ruby">    @args        = args</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="26000" data-linenumber="11">
            <span class="hits">26000</span>

            

            

            <code class="ruby">    @id          = args[:id].to_i</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="26000" data-linenumber="12">
            <span class="hits">26000</span>

            

            

            <code class="ruby">    @first_name  = args[:first_name].to_s</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="26000" data-linenumber="13">
            <span class="hits">26000</span>

            

            

            <code class="ruby">    @last_name   = args[:last_name].to_s</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="26000" data-linenumber="14">
            <span class="hits">26000</span>

            

            

            <code class="ruby">    @created_at  = Time.parse(args[:created_at].to_s)</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="26000" data-linenumber="15">
            <span class="hits">26000</span>


            

            <code class="ruby">    @updated_at  = Time.parse(args[:updated_at].to_s)</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="26000" data-linenumber="16">
            <span class="hits">26000</span>


            

            <code class="ruby">    @parent      = parent</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="17">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="18">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="19">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="20">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="21">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def update(args)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="22">
            
            

            

            <code class="ruby">    @first_name = (args[:first_name].to_s) if !args[:first_name].nil?</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="23">
            
            

            

            <code class="ruby">    @last_name = (args[:last_name].to_s) if !args[:last_name].nil?</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="24">
            
            

            

            <code class="ruby">    @updated_at  = Time.now</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="25">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="26">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="1ed569b33ab2d293a33e899129cff6d693bb3eba">
  <div class="header">
    <h3>lib/customer_repository.rb</h3>
    <h4>
      <span class="red">
  52.38%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>42</b> relevant lines.
      <span class="green"><b>22</b> lines covered</span> and
      <span class="red"><b>20</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            <span class="hits">1</span>
            

            

            <code class="ruby">require_relative &#39;customer&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="2">
            <span class="hits">1</span>
            

            

            <code class="ruby">require &#39;time&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="3">
            <span class="hits">1</span>
            

            

            <code class="ruby">require &quot;csv&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="4">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="5">
            <span class="hits">1</span>
            

            

            <code class="ruby">class CustomerRepository</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="6">
            <span class="hits">1</span>
            

            

            <code class="ruby">  attr_reader :filename,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="7">
            
            

            

            <code class="ruby">              :parent,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="8">
            
            

            

            <code class="ruby">              :customers</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="9">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="10">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def initialize(filename, parent)</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="26" data-linenumber="11">
            <span class="hits">26</span>


            

            <code class="ruby">    @filename = filename</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="26" data-linenumber="12">
            <span class="hits">26</span>

            

            

            <code class="ruby">    @parent = parent</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="26" data-linenumber="13">
            <span class="hits">26</span>

            

            

            <code class="ruby">    @customers = Array.new</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="26" data-linenumber="14">
            <span class="hits">26</span>

            

            

            <code class="ruby">    generate_customers(filename)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="15">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="16">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="17">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def inspect</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="18">
            
            

            

            <code class="ruby">    &quot;#&lt;#{self.class} #{@customers.size} rows&gt;&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="19">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="20">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="21">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def generate_customers(filename)</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="26" data-linenumber="22">
            <span class="hits">26</span>

            

            

            <code class="ruby">    customers = CSV.open filename, headers: true, header_converters: :symbol</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="26" data-linenumber="23">
            <span class="hits">26</span>

            

            

            <code class="ruby">    customers.each do |row|</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="26000" data-linenumber="24">
            <span class="hits">26000</span>

            

            

            <code class="ruby">      @customers &lt;&lt; Customer.new(row, self)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="25">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="26">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="27">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="28">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def all</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="29">
            
            

            

            <code class="ruby">    @customers</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="30">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="31">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="32">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def find_by_id(id)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="33">
            
            

            

            <code class="ruby">    @customers.find do |customer|</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="34">
            
            

            

            <code class="ruby">      customer.id.to_i == id</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="35">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="36">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="37">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="38">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def find_all_by_first_name(first_name)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="39">
            
            

            

            <code class="ruby">    @customers.find_all do |customer|</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="40">
            
            

            

            <code class="ruby">     customer.first_name.downcase.include?(first_name.downcase)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="41">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="42">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="43">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="44">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def find_all_by_last_name(last_name)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="45">
            
            

            

            <code class="ruby">    @customers.find_all do |customer|</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="46">
            
            

            

            <code class="ruby">     customer.last_name.downcase.include?(last_name.downcase)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="47">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="48">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="49">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="50">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def create(attributes)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="51">
            
            

            

            <code class="ruby">    id = @customers[-1].id.to_i</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="52">
            
            

            

            <code class="ruby">    id += 1</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="53">
            
            

            

            <code class="ruby">    id = id.to_i</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="54">
            
            

            

            <code class="ruby">    attributes[:id] = id</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="55">
            
            

            

            <code class="ruby">    customer = Customer.new(attributes, self)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="56">
            
            

            

            <code class="ruby">    @customers &lt;&lt; customer</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="57">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="58">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="59">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def update(id, attributes)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="60">
            
            

            

            <code class="ruby">    update_customer = find_by_id(id)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="61">
            
            

            

            <code class="ruby">    update_customer.update(attributes) if !attributes[:first_name].nil?</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="62">
            
            

            

            <code class="ruby">    update_customer.update(attributes) if !attributes[:last_name].nil?</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="63">
            
            

            

            <code class="ruby">    update_customer</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="64">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="65">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="66">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def delete(id)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="67">
            
            

            

            <code class="ruby">    delete = find_by_id(id)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="68">
            
            

            

            <code class="ruby">    @customers.delete(delete)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="69">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="70">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="09d0202a77786c7ec68e9f487c2b1e886f13cb99">
  <div class="header">
    <h3>lib/invoice.rb</h3>
    <h4>
      <span class="yellow">
  84.62%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>13</b> relevant lines.
      <span class="green"><b>11</b> lines covered</span> and
      <span class="red"><b>2</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="never" data-hits="" data-linenumber="1">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="2">
            <span class="hits">1</span>
            

            

            <code class="ruby">class Invoice</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="3">
            <span class="hits">1</span>
            

            

            <code class="ruby">  attr_reader :id,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="4">
            
            

            

            <code class="ruby">              :customer_id,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="5">
            
            

            

            <code class="ruby">              :merchant_id,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="6">
            
            

            

            <code class="ruby">              :status,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="7">
            
            

            

            <code class="ruby">              :created_at,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="8">
            
            

            

            <code class="ruby">              :updated_at,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="9">
            
            

            

            <code class="ruby">              :parent</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="10">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="11">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def initialize(args, parent)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="129610" data-linenumber="12">
            <span class="hits">129610</span>
            

            

            <code class="ruby">    @id          = args[:id].to_i</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="129610" data-linenumber="13">
            <span class="hits">129610</span>
            

            

            <code class="ruby">    @customer_id = args[:customer_id].to_i</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="129610" data-linenumber="14">
            <span class="hits">129610</span>
            

            

            <code class="ruby">    @merchant_id = args[:merchant_id].to_i</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="129610" data-linenumber="15">
            <span class="hits">129610</span>
            

            

            <code class="ruby">    @status      = args[:status].to_sym</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="129610" data-linenumber="16">
            <span class="hits">129610</span>
            

            

            <code class="ruby">    @created_at  = Time.parse(args[:created_at].to_s)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="129610" data-linenumber="17">
            <span class="hits">129610</span>
            

            

            <code class="ruby">    @updated_at  = Time.parse(args[:updated_at].to_s)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="129610" data-linenumber="18">
            <span class="hits">129610</span>
            

            

            <code class="ruby">    @parent      = parent</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="19">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="20">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="21">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def update(args)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="22">
            
            

            

            <code class="ruby">    @status  = (args[:status].to_sym) if !args[:status].nil?</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="23">
            
            

            

            <code class="ruby">    @updated_at  = Time.now</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="24">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="25">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="1a9732cc8a46956025c86263d8bc21a00675b695">
  <div class="header">
    <h3>lib/invoice_item.rb</h3>
    <h4>
      <span class="red">
  77.78%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>18</b> relevant lines.
      <span class="green"><b>14</b> lines covered</span> and
      <span class="red"><b>4</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            <span class="hits">1</span>
            

            

            <code class="ruby">class InvoiceItem</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="2">
            <span class="hits">1</span>
            

            

            <code class="ruby">  attr_reader :id,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="3">
            
            

            

            <code class="ruby">              :item_id,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="4">
            
            

            

            <code class="ruby">              :invoice_id,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="5">
            
            

            

            <code class="ruby">              :quantity,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="6">
            
            

            

            <code class="ruby">              :unit_price,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="7">
            
            

            

            <code class="ruby">              :created_at,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="8">
            
            

            

            <code class="ruby">              :updated_at,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="9">
            
            

            

            <code class="ruby">              :parent</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="10">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="11">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def initialize(args, parent)</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="567580" data-linenumber="12">
            <span class="hits">567580</span>

            

            

            <code class="ruby">    @args        = args</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="567580" data-linenumber="13">
            <span class="hits">567580</span>

            

            

            <code class="ruby">    @id          = args[:id].to_i</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="567580" data-linenumber="14">
            <span class="hits">567580</span>


            

            <code class="ruby">    @item_id     = args[:item_id].to_i</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="567580" data-linenumber="15">
            <span class="hits">567580</span>

            

            

            <code class="ruby">    @invoice_id  = args[:invoice_id].to_i</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="567580" data-linenumber="16">
            <span class="hits">567580</span>

            

            

            <code class="ruby">    @quantity    = args[:quantity].to_i</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="567580" data-linenumber="17">
            <span class="hits">567580</span>


            

            <code class="ruby">    @unit_price  = (args[:unit_price].to_d) / 100</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="567580" data-linenumber="18">
            <span class="hits">567580</span>

            

            

            <code class="ruby">    @created_at  = Time.parse(args[:created_at].to_s)</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="567580" data-linenumber="19">
            <span class="hits">567580</span>

            

            

            <code class="ruby">    @updated_at  = Time.parse(args[:updated_at].to_s)</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="567580" data-linenumber="20">
            <span class="hits">567580</span>

            

            

            <code class="ruby">    @parent      = parent</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="21">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="22">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="23">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def unit_price_to_dollars</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="24">
            
            

            

            <code class="ruby">    @unit_price.to_f</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="25">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="26">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="27">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def update(args)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="28">
            
            

            

            <code class="ruby">    @quantity  = (args[:quantity].to_i) if !args[:quantity].nil?</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="29">
            
            

            

            <code class="ruby">    @unit_price = (args[:unit_price].to_f) if !args[:unit_price].nil?</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="30">
            
            

            

            <code class="ruby">    @updated_at  = Time.now</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="31">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="32">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="d645afdb60aeb4090e163ecb1619c47a69681ba0">
  <div class="header">
    <h3>lib/invoice_item_repository.rb</h3>
    <h4>
      <span class="red">
  54.55%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>44</b> relevant lines.
      <span class="green"><b>24</b> lines covered</span> and
      <span class="red"><b>20</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            <span class="hits">1</span>
            

            

            <code class="ruby">require_relative &#39;invoice_item&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="2">
            <span class="hits">1</span>
            

            

            <code class="ruby">require &#39;bigdecimal&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="3">
            <span class="hits">1</span>
            

            

            <code class="ruby">require &#39;bigdecimal/util&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="4">
            <span class="hits">1</span>
            

            

            <code class="ruby">require &#39;time&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="5">
            <span class="hits">1</span>
            

            

            <code class="ruby">require &quot;csv&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="6">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="7">
            <span class="hits">1</span>
            

            

            <code class="ruby">class InvoiceItemRepository</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="8">
            <span class="hits">1</span>
            

            

            <code class="ruby">  attr_reader :filename,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="9">
            
            

            

            <code class="ruby">              :parent,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="10">
            
            

            

            <code class="ruby">              :invoice_items</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="11">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="12">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def initialize(filename, parent)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="26" data-linenumber="13">
            <span class="hits">26</span>
            

            

            <code class="ruby">    @filename = filename</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="26" data-linenumber="14">
            <span class="hits">26</span>
            

            

            <code class="ruby">    @parent = parent</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="26" data-linenumber="15">
            <span class="hits">26</span>
            

            

            <code class="ruby">    @invoice_items = Array.new</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="26" data-linenumber="16">
            <span class="hits">26</span>
            

            

            <code class="ruby">    generate_invoices(filename)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="17">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="18">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="19">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def inspect</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="20">
            
            

            

            <code class="ruby">    &quot;#&lt;#{self.class} #{@invoice_items.size} rows&gt;&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="21">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="22">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="23">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def generate_invoices(filename)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="26" data-linenumber="24">
            <span class="hits">26</span>
            

            

            <code class="ruby">    invoice_items = CSV.open filename, headers: true, header_converters: :symbol</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="26" data-linenumber="25">
            <span class="hits">26</span>
            

            

            <code class="ruby">    invoice_items.each do |row|</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="567580" data-linenumber="26">
            <span class="hits">567580</span>

            

            

            <code class="ruby">      @invoice_items &lt;&lt; InvoiceItem.new(row, self)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="27">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="28">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="29">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="30">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="31">
            <span class="hits">1</span>
            

            

            <code class="ruby">    def all</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="32">
            
            

            

            <code class="ruby">      @invoice_items</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="33">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="34">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="35">
            <span class="hits">1</span>
            

            

            <code class="ruby">    def find_by_id(id)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="36">
            
            

            

            <code class="ruby">      @invoice_items.find do |invoice_item|</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="37">
            
            

            

            <code class="ruby">        invoice_item.id.to_i == id</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="38">
            
            

            

            <code class="ruby">      end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="39">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="40">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="41">
            <span class="hits">1</span>
            

            

            <code class="ruby">    def find_all_by_item_id(item_id)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="42">
            
            

            

            <code class="ruby">      @invoice_items.find_all do |invoice_item|</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="43">
            
            

            

            <code class="ruby">       invoice_item.item_id.to_i == item_id</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="44">
            
            

            

            <code class="ruby">      end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="45">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="46">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="47">
            <span class="hits">1</span>
            

            

            <code class="ruby">    def find_all_by_invoice_id(invoice_id)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="48">
            
            

            

            <code class="ruby">      @invoice_items.find_all do |invoice_item|</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="49">
            
            

            

            <code class="ruby">       invoice_item.invoice_id.to_i == invoice_id</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="50">
            
            

            

            <code class="ruby">      end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="51">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="52">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="53">
            <span class="hits">1</span>
            

            

            <code class="ruby">      def create(attributes)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="54">
            
            

            

            <code class="ruby">        id = @invoice_items[-1].id.to_i</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="55">
            
            

            

            <code class="ruby">        id += 1</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="56">
            
            

            

            <code class="ruby">        id = id.to_i</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="57">
            
            

            

            <code class="ruby">        attributes[:id] = id</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="58">
            
            

            

            <code class="ruby">        invoice_item = InvoiceItem.new(attributes, self)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="59">
            
            

            

            <code class="ruby">        @invoice_items &lt;&lt; invoice_item</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="60">
            
            

            

            <code class="ruby">      end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="61">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="62">
            <span class="hits">1</span>
            

            

            <code class="ruby">    def update(id, attributes)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="63">
            
            

            

            <code class="ruby">      update_invoice_item = find_by_id(id)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="64">
            
            

            

            <code class="ruby">      update_invoice_item.update(attributes) if !attributes[:quantity].nil?</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="65">
            
            

            

            <code class="ruby">      update_invoice_item.update(attributes) if !attributes[:unit_price].nil?</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="66">
            
            

            

            <code class="ruby">      update_invoice_item</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="67">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="68">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="69">
            <span class="hits">1</span>
            

            

            <code class="ruby">    def delete(id)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="70">
            
            

            

            <code class="ruby">      delete = find_by_id(id)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="71">
            
            

            

            <code class="ruby">      @invoice_items.delete(delete)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="72">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="73">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="84a36ae3489df4f40c3b3ce84abf434d324403f9">
  <div class="header">
    <h3>lib/invoice_repository.rb</h3>
    <h4>
      <span class="red">
  75.0%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>36</b> relevant lines.
      <span class="green"><b>27</b> lines covered</span> and
      <span class="red"><b>9</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            <span class="hits">1</span>
            

            

            <code class="ruby">require_relative &#39;invoice&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="2">
            <span class="hits">1</span>
            

            

            <code class="ruby">require_relative &#39;repository_module&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="3">
            <span class="hits">1</span>
            

            

            <code class="ruby">require &#39;bigdecimal&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="4">
            <span class="hits">1</span>
            

            

            <code class="ruby">require &#39;bigdecimal/util&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="5">
            <span class="hits">1</span>
            

            

            <code class="ruby">require &#39;time&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="6">
            <span class="hits">1</span>
            

            

            <code class="ruby">require &quot;csv&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="7">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="8">
            <span class="hits">1</span>
            

            

            <code class="ruby">class InvoiceRepository</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="9">
            <span class="hits">1</span>
            

            

            <code class="ruby">  include Repository</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="10">
            <span class="hits">1</span>
            

            

            <code class="ruby">  attr_reader :filename,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="11">
            
            

            

            <code class="ruby">              :parent,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="12">
            
            

            

            <code class="ruby">              :collection</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="13">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="14">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def initialize(filename, parent)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="26" data-linenumber="15">
            <span class="hits">26</span>
            

            

            <code class="ruby">    @filename = filename</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="26" data-linenumber="16">
            <span class="hits">26</span>
            

            

            <code class="ruby">    @parent = parent</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="26" data-linenumber="17">
            <span class="hits">26</span>
            

            

            <code class="ruby">    @collection = Array.new</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="26" data-linenumber="18">
            <span class="hits">26</span>
            

            

            <code class="ruby">    generate_invoices(filename)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="19">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="20">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="21">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def generate_invoices(filename)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="26" data-linenumber="22">
            <span class="hits">26</span>
            

            

            <code class="ruby">    invoices = CSV.open filename, headers: true, header_converters: :symbol</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="26" data-linenumber="23">
            <span class="hits">26</span>
            

            

            <code class="ruby">    invoices.each do |row|</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="129610" data-linenumber="24">
            <span class="hits">129610</span>
            

            

            <code class="ruby">      @collection &lt;&lt; Invoice.new(row, self)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="25">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="26">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="27">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="28">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def find_all_by_customer_id(customer_id)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="29">
            
            

            

            <code class="ruby">   customer_found = []</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="30">
            
            

            

            <code class="ruby">    @collection.find_all do |invoice|</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="31">
            
            

            

            <code class="ruby">     invoice.customer_id.to_i == customer_id</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="32">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="33">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="34">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="35">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def find_all_by_merchant_id(merchant_id)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3325" data-linenumber="36">
            <span class="hits">3325</span>
            

            

            <code class="ruby">    @collection.find_all do |invoice|</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="16575125" data-linenumber="37">
            <span class="hits">16575125</span>
            

            

            <code class="ruby">     invoice.merchant_id.to_i == merchant_id</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="38">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="39">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="40">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="41">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def find_all_by_status(status)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3" data-linenumber="42">
            <span class="hits">3</span>
            

            

            <code class="ruby">    @collection.find_all do |invoice|</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="14955" data-linenumber="43">
            <span class="hits">14955</span>
            

            

            <code class="ruby">      invoice.status.to_sym == status</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="44">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="45">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="46">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="47">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def create(attributes)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="48">
            
            

            

            <code class="ruby">    attributes[:id] = highest_id_plus_one</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="49">
            
            

            

            <code class="ruby">    invoice = Invoice.new(attributes, self)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="50">
            
            

            

            <code class="ruby">    @collection &lt;&lt; invoice</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="51">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="52">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="53">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def update(id, attributes)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="54">
            
            

            

            <code class="ruby">    update_invoice = find_by_id(id)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="55">
            
            

            

            <code class="ruby">    update_invoice.update(attributes) if !attributes[:status].nil?</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="56">
            
            

            

            <code class="ruby">    update_invoice</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="57">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="58">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="9c278b9ebdc636430aab0585aee6544de728954f">
  <div class="header">
    <h3>lib/item.rb</h3>
    <h4>
      <span class="red">
  77.27%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>22</b> relevant lines.
      <span class="green"><b>17</b> lines covered</span> and
      <span class="red"><b>5</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            <span class="hits">1</span>
            

            

            <code class="ruby">require &#39;bigdecimal&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="2">
            <span class="hits">1</span>
            

            

            <code class="ruby">require &#39;bigdecimal/util&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="3">
            <span class="hits">1</span>
            

            

            <code class="ruby">require &#39;time&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="4">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="5">
            <span class="hits">1</span>
            

            

            <code class="ruby">class Item</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="6">
            <span class="hits">1</span>
            

            

            <code class="ruby">  attr_reader :id,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="7">
            
            

            

            <code class="ruby">              :name,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="8">
            
            

            

            <code class="ruby">              :description,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="9">
            
            

            

            <code class="ruby">              :unit_price,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="10">
            
            

            

            <code class="ruby">              :created_at,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="11">
            
            

            

            <code class="ruby">              :updated_at,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="12">
            
            

            

            <code class="ruby">              :merchant_id,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="13">
            
            

            

            <code class="ruby">              :parent</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="14">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="15">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def initialize(args, parent)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="35542" data-linenumber="16">
            <span class="hits">35542</span>
            

            

            <code class="ruby">    @args        = args</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="35542" data-linenumber="17">
            <span class="hits">35542</span>
            

            

            <code class="ruby">    @id          = args[:id].to_i</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="35542" data-linenumber="18">
            <span class="hits">35542</span>
            

            

            <code class="ruby">    @name        = args[:name].to_s</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="35542" data-linenumber="19">
            <span class="hits">35542</span>
            

            

            <code class="ruby">    @description = args[:description].to_s</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="35542" data-linenumber="20">
            <span class="hits">35542</span>
            

            

            <code class="ruby">    @unit_price  = (args[:unit_price].to_d) / 100</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="35542" data-linenumber="21">
            <span class="hits">35542</span>
            

            

            <code class="ruby">    @created_at  = Time.parse(args[:created_at].to_s)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="35542" data-linenumber="22">
            <span class="hits">35542</span>
            

            

            <code class="ruby">    @updated_at  = Time.parse(args[:updated_at].to_s)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="35542" data-linenumber="23">
            <span class="hits">35542</span>
            

            

            <code class="ruby">    @merchant_id = args[:merchant_id].to_s</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="35542" data-linenumber="24">
            <span class="hits">35542</span>
            

            

            <code class="ruby">    @parent = parent</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="25">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="26">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="27">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def update(args)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="28">
            
            

            

            <code class="ruby">    @unit_price  = (args[:unit_price].to_d) if !args[:unit_price].nil?</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="29">
            
            

            

            <code class="ruby">    @description = args[:description].to_s if !args[:description].nil?</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="30">
            
            

            

            <code class="ruby">    @name        = args[:name].to_s  if !args[:name].nil?</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="31">
            
            

            

            <code class="ruby">    @updated_at  = Time.now</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="32">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="33">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="34">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def unit_price_to_dollars</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="35">
            
            

            

            <code class="ruby">    @unit_price.to_f</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="36">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="37">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="38">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="d0e1bb360b3f36810285081b22454984efafe766">
  <div class="header">
    <h3>lib/item_repository.rb</h3>
    <h4>
      <span class="red">
  63.41%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>41</b> relevant lines.
      <span class="green"><b>26</b> lines covered</span> and
      <span class="red"><b>15</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            <span class="hits">1</span>
            

            

            <code class="ruby">require_relative &quot;item&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="2">
            <span class="hits">1</span>
            

            

            <code class="ruby">require &#39;bigdecimal&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="3">
            <span class="hits">1</span>
            

            

            <code class="ruby">require &#39;bigdecimal/util&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="4">
            <span class="hits">1</span>
            

            

            <code class="ruby">require &#39;time&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="5">
            <span class="hits">1</span>
            

            

            <code class="ruby">require &quot;csv&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="6">
            <span class="hits">1</span>
            

            

            <code class="ruby">require_relative &#39;repository_module&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="7">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="8">
            <span class="hits">1</span>
            

            

            <code class="ruby">class ItemRepository</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="9">
            <span class="hits">1</span>
            

            

            <code class="ruby">  include Repository</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="10">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="11">
            <span class="hits">1</span>
            

            

            <code class="ruby">  attr_reader :filename,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="12">
            
            

            

            <code class="ruby">              :parent,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="13">
            
            

            

            <code class="ruby">              :collection</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="14">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="15">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def initialize(filename, parent)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="26" data-linenumber="16">
            <span class="hits">26</span>
            

            

            <code class="ruby">    @filename = filename</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="26" data-linenumber="17">
            <span class="hits">26</span>
            

            

            <code class="ruby">    @parent = parent</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="26" data-linenumber="18">
            <span class="hits">26</span>
            

            

            <code class="ruby">    @collection = Array.new</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="26" data-linenumber="19">
            <span class="hits">26</span>
            

            

            <code class="ruby">    generate_items(filename)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="20">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="21">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="22">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def generate_items(filename)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="26" data-linenumber="23">
            <span class="hits">26</span>
            

            

            <code class="ruby">    items = CSV.open filename, headers: true, header_converters: :symbol</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="26" data-linenumber="24">
            <span class="hits">26</span>
            

            

            <code class="ruby">    items.each do |row|</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="35542" data-linenumber="25">
            <span class="hits">35542</span>
            

            

            <code class="ruby">      @collection &lt;&lt; Item.new(row, self)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="26">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="27">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="28">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="29">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def find_all_with_description(description)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="30">
            
            

            

            <code class="ruby">    @collection.find_all do |item|</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="31">
            
            

            

            <code class="ruby">      item.description.downcase == description.downcase</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="32">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="33">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="34">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="35">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def find_all_by_price(price)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="36">
            
            

            

            <code class="ruby">    @collection.find_all do |item|</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="37">
            
            

            

            <code class="ruby">      item.unit_price == price</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="38">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="39">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="40">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="41">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def find_all_by_price_in_range(range)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="42">
            
            

            

            <code class="ruby">    @collection.find_all do |item|</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="43">
            
            

            

            <code class="ruby">      range.include?(item.unit_price)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="44">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="45">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="46">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="47">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def find_all_by_merchant_id(merchant_id)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="8552" data-linenumber="48">
            <span class="hits">8552</span>
            

            

            <code class="ruby">    @collection.find_all do |item|</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="11690584" data-linenumber="49">
            <span class="hits">11690584</span>
            

            

            <code class="ruby">      item.merchant_id == merchant_id.to_s</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="50">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="51">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="52">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="53">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def create(attributes)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="54">
            
            

            

            <code class="ruby">    attributes[:id] = highest_id_plus_one.to_s</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="55">
            
            

            

            <code class="ruby">    attributes[:unit_price]</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="56">
            
            

            

            <code class="ruby">    item = Item.new(attributes, self)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="57">
            
            

            

            <code class="ruby">    @collection.push(item)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="58">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="59">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="60">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def update(id, attributes)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="61">
            
            

            

            <code class="ruby">    update_item = find_by_id(id)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="62">
            
            

            

            <code class="ruby">    update_item.update(attributes) if !attributes[:name].nil?</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="63">
            
            

            

            <code class="ruby">    update_item.update(attributes) if !attributes[:description].nil?</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="64">
            
            

            

            <code class="ruby">    update_item.update(attributes) if !attributes[:unit_price].nil?</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="65">
            
            

            

            <code class="ruby">    update_item</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="66">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="67">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="68">
            
            

            

            <code class="ruby">  # def delete(id)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="69">
            
            

            

            <code class="ruby">  #   delete = find_by_id(id)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="70">
            
            

            

            <code class="ruby">  #   @collection.delete(delete)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="71">
            
            

            

            <code class="ruby">  # end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="72">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="73">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="cff247e2de2482271b9b31960c2f09c57a6cc16d">
  <div class="header">
    <h3>lib/merchant.rb</h3>
    <h4>
      <span class="yellow">
  87.5%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>8</b> relevant lines.
      <span class="green"><b>7</b> lines covered</span> and
      <span class="red"><b>1</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            <span class="hits">1</span>
            

            

            <code class="ruby">class Merchant</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="2">
            <span class="hits">1</span>
            

            

            <code class="ruby">  attr_reader :id,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="3">
            
            

            

            <code class="ruby">              :name,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="4">
            
            

            

            <code class="ruby">              :parent</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="5">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="6">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def initialize(id, name, parent)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="12350" data-linenumber="7">
            <span class="hits">12350</span>
            

            

            <code class="ruby">    @id = id.to_i</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="12350" data-linenumber="8">
            <span class="hits">12350</span>
            

            

            <code class="ruby">    @name = name</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="12350" data-linenumber="9">
            <span class="hits">12350</span>
            

            

            <code class="ruby">    @parent = parent</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="10">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="11">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="12">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def update(name)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="13">
            
            

            

            <code class="ruby">    @name = name</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="14">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="15">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="16">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="b6c86694a1542b5532d474dcedc3aeb6826a8219">
  <div class="header">
    <h3>lib/merchant_repository.rb</h3>
    <h4>
      <span class="red">
  72.0%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>25</b> relevant lines.
      <span class="green"><b>18</b> lines covered</span> and
      <span class="red"><b>7</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            <span class="hits">1</span>
            

            

            <code class="ruby">require_relative &quot;merchant&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="2">
            <span class="hits">1</span>
            

            

            <code class="ruby">require_relative &#39;repository_module&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="3">
            <span class="hits">1</span>
            

            

            <code class="ruby">require &quot;csv&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="4">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="5">
            <span class="hits">1</span>
            

            

            <code class="ruby">class MerchantRepository</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="6">
            <span class="hits">1</span>
            

            

            <code class="ruby">  include Repository</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="7">
            <span class="hits">1</span>
            

            

            <code class="ruby">  attr_reader :filename,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="8">
            
            

            

            <code class="ruby">              :collection,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="9">
            
            

            

            <code class="ruby">              :parent</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="10">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="11">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def initialize(filename, parent)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="26" data-linenumber="12">
            <span class="hits">26</span>
            

            

            <code class="ruby">    @filename = filename</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="26" data-linenumber="13">
            <span class="hits">26</span>
            

            

            <code class="ruby">    @parent = parent</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="26" data-linenumber="14">
            <span class="hits">26</span>
            

            

            <code class="ruby">    @collection = Array.new</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="26" data-linenumber="15">
            <span class="hits">26</span>
            

            

            <code class="ruby">    generate_merchants(filename)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="16">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="17">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="18">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def generate_merchants(filename)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="26" data-linenumber="19">
            <span class="hits">26</span>
            

            

            <code class="ruby">    merchants = CSV.open filename, headers: true, header_converters: :symbol</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="26" data-linenumber="20">
            <span class="hits">26</span>
            

            

            <code class="ruby">    merchants.each do |row|</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="12350" data-linenumber="21">
            <span class="hits">12350</span>
            

            

            <code class="ruby">      @collection &lt;&lt; Merchant.new(row[:id], row[:name], self)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="22">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="23">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="24">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="25">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def find_all_by_name(name)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="26">
            
            

            

            <code class="ruby">    found_merchants = collection.find_all do |merchant|</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="27">
            
            

            

            <code class="ruby">      merchant.name.downcase.include?(name.downcase)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="28">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="29">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="30">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="31">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def create(hash)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="32">
            
            

            

            <code class="ruby">    new_merchant = Merchant.new(highest_id_plus_one, hash[:name], self)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="33">
            
            

            

            <code class="ruby">    @collection &lt;&lt; new_merchant</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="34">
            
            

            

            <code class="ruby">    new_merchant</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="35">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="36">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="37">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def update(id, name_hash)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="38">
            
            

            

            <code class="ruby">    update_merchant = find_by_id(id)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="39">
            
            

            

            <code class="ruby">    update_merchant.update(name_hash[:name]) if !name_hash[:name].nil?</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="40">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="41">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="42">
            
            

            

            <code class="ruby">  # def delete(id)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="43">
            
            

            

            <code class="ruby">  #   delete = find_by_id(id)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="44">
            
            

            

            <code class="ruby">  #   @collection.delete(delete)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="45">
            
            

            

            <code class="ruby">  # end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="46">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="47">
            
            

            

            <code class="ruby">  # def inspect</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="48">
            
            

            

            <code class="ruby">  # &quot;#&lt;#{self.class} #{@collection.size} rows&gt;&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="49">
            
            

            

            <code class="ruby">  # end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="50">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="ec5414214a7d1d7a73e108244c6f8e47f8b07776">
  <div class="header">
    <h3>lib/repository_module.rb</h3>
    <h4>
      <span class="red">
  55.56%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>18</b> relevant lines.
      <span class="green"><b>10</b> lines covered</span> and
      <span class="red"><b>8</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            <span class="hits">1</span>
            

            

            <code class="ruby">module Repository</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="2">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def all</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1015" data-linenumber="3">
            <span class="hits">1015</span>
            

            

            <code class="ruby">    @collection</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="4">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="5">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="6">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def find_by_id(id)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="68" data-linenumber="7">
            <span class="hits">68</span>
            

            

            <code class="ruby">    @collection.find do |element|</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="13328" data-linenumber="8">
            <span class="hits">13328</span>
            

            

            <code class="ruby">      element.id.to_i == id</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="9">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="10">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="11">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="12">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def find_by_name(name)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="13">
            
            

            

            <code class="ruby">    @collection.find do |element|</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="14">
            
            

            

            <code class="ruby">      element.name.downcase == name.downcase</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="15">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="16">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="17">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="18">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def highest_id_plus_one</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="19">
            
            

            

            <code class="ruby">    highest = @collection.max do |element|</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="20">
            
            

            

            <code class="ruby">      element.id</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="21">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="22">
            
            

            

            <code class="ruby">    highest.id + 1</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="23">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="24">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="25">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def delete(id)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="26">
            
            

            

            <code class="ruby">    delete = find_by_id(id)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="27">
            
            

            

            <code class="ruby">    @collection.delete(delete)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="28">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="29">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="30">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def inspect</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="31">
            
            

            

            <code class="ruby">  &quot;#&lt;#{self.class} #{@collection.size} rows&gt;&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="32">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="33">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="d77ecadd5d5c6c1d595120587d4f46f78fe9cb92">
  <div class="header">
    <h3>lib/sales_analyst.rb</h3>
    <h4>

      <span class="green">
  98.23%

</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">

      <b>113</b> relevant lines.
      <span class="green"><b>111</b> lines covered</span> and
      <span class="red"><b>2</b> lines missed.</span>

    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            <span class="hits">1</span>
            

            

            <code class="ruby">class SalesAnalyst</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="2">
            <span class="hits">1</span>
            

            

            <code class="ruby">  attr_reader :parent</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="3">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="4">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def initialize(parent)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="26" data-linenumber="5">
            <span class="hits">26</span>
            

            

            <code class="ruby">    @parent = parent</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="6">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="7">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="8">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def average_items_per_merchant</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="4" data-linenumber="9">
            <span class="hits">4</span>
            

            

            <code class="ruby">    (all_collection_count(@parent.items) / all_collection_count(@parent.merchants).to_f).round(2)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="10">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="11">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="12">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def generate_merchant_ids</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="22" data-linenumber="13">
            <span class="hits">22</span>
            

            

            <code class="ruby">    @parent.merchants.all.map do |merchant|</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="10450" data-linenumber="14">
            <span class="hits">10450</span>

            

            

            <code class="ruby">      merchant.id</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="15">
            
            

            

            <code class="ruby">    end</code>

          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="16">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="17">
            
            

            

            <code class="ruby"></code>

          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="1" data-linenumber="18">
            <span class="hits">1</span>

            

            

            <code class="ruby">  def items_count_per_merchant</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="5" data-linenumber="19">
            <span class="hits">5</span>


            

            <code class="ruby">    generate_merchant_ids.map do |id|</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="2375" data-linenumber="20">
            <span class="hits">2375</span>

            

            


            <code class="ruby">      @parent.items.find_all_by_merchant_id(id).count</code>

          </li>
        </div>
      
        <div>

          <li class="never" data-hits="" data-linenumber="21">

            
            

            


            <code class="ruby">    end</code>

          </li>
        </div>
      
        <div>

          <li class="never" data-hits="" data-linenumber="22">

            
            

            

            <code class="ruby">  end</code>

          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="21">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="1" data-linenumber="24">
            <span class="hits">1</span>

            

            

            <code class="ruby">  def all_elements_minus_one(collection)</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="10" data-linenumber="25">
            <span class="hits">10</span>

            

            

            <code class="ruby">    collection.length - 1</code>
          </li>
        </div>
      
        <div>

          <li class="never" data-hits="" data-linenumber="26">
            

            

            


            <code class="ruby">  end</code>

          </li>
        </div>
      
        <div>

          <li class="never" data-hits="" data-linenumber="27">

            
            

            


            <code class="ruby"></code>

          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="1" data-linenumber="28">
            <span class="hits">1</span>

            

            

            <code class="ruby">  def standard_deviaton_calculation(total, collection_minus_one)</code>

          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="9" data-linenumber="29">
            <span class="hits">9</span>

            

            


            <code class="ruby">    standard_deviaton = Math.sqrt(total / collection_minus_one)</code>

          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="9" data-linenumber="30">
            <span class="hits">9</span>

            

            


            <code class="ruby">    standard_deviaton.round(2)</code>

          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="29">
            
            

            


            <code class="ruby">  end</code>

          </li>
        </div>
      
        <div>

          <li class="never" data-hits="" data-linenumber="32">
            

            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="1" data-linenumber="33">

            <span class="hits">1</span>
            

            

            <code class="ruby">  def average_items_per_merchant_standard_deviation</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="9" data-linenumber="34">
            <span class="hits">9</span>

            

            

            <code class="ruby">    standard_deviaton_calculation(total(items_count_per_merchant, average_items_per_merchant), all_elements_minus_one(items_count_per_merchant))</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="2867" data-linenumber="35">
            <span class="hits">2867</span>

            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>

          <li class="never" data-hits="" data-linenumber="36">

            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>

          <li class="never" data-hits="" data-linenumber="37">
            

            

            

            <code class="ruby">  def merchants_with_high_item_count</code>
          </li>
        </div>
      
        <div>

          <li class="never" data-hits="" data-linenumber="38">

            

            

            <code class="ruby">    high_seller_count = average_items_per_merchant + average_items_per_merchant_standard_deviation</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="1" data-linenumber="39">
            <span class="hits">1</span>

            

            

            <code class="ruby">    merchants = []</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="46">
            
            

            

            <code class="ruby">    generate_merchant_ids.find_all do |id|</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="47">
            
            

            

            <code class="ruby">      item_count = @parent.items.find_all_by_merchant_id(id).count</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2" data-linenumber="40">
            <span class="hits">2</span>
            

            

            <code class="ruby">      merchants.push(@parent.merchants.find_by_id(id)) if item_count &gt; high_seller_count</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="41">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>

          <li class="never" data-hits="" data-linenumber="42">

            
            

            

            <code class="ruby">    merchants</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="1" data-linenumber="43">
            <span class="hits">1</span>


            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="1" data-linenumber="44">
            <span class="hits">1</span>

            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="1" data-linenumber="45">

            <span class="hits">1</span>
            

            

            <code class="ruby">  def average_item_price_for_merchant(id)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="46">
            <span class="hits">1</span>
            

            

            <code class="ruby">    item_count = @parent.items.find_all_by_merchant_id(id).count</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="475" data-linenumber="47">
            <span class="hits">475</span>
            

            

            <code class="ruby">    all_items_price = @parent.items.find_all_by_merchant_id(id).sum do |item|</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="475" data-linenumber="48">
            <span class="hits">475</span>
            

            

            <code class="ruby">      item.unit_price</code>
          </li>
        </div>
      
        <div>

          <li class="never" data-hits="" data-linenumber="49">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="50">
            <span class="hits">1</span>
            

            

            <code class="ruby">    merchants</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="51">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="52">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="53">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def average_item_price_for_merchant(id)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2851" data-linenumber="54">
            <span class="hits">2851</span>
            

            

            <code class="ruby">    item_count = @parent.items.find_all_by_merchant_id(id).count</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="2851" data-linenumber="55">
            <span class="hits">2851</span>
            

            

            <code class="ruby">    all_items_price = @parent.items.find_all_by_merchant_id(id).sum do |item|</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="8205" data-linenumber="56">
            <span class="hits">8205</span>
            

            

            <code class="ruby">      item.unit_price</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="57">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="2851" data-linenumber="58">
            <span class="hits">2851</span>


            

            <code class="ruby">    average_price = all_items_price / item_count.to_f</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="2851" data-linenumber="59">
            <span class="hits">2851</span>

            

            

            <code class="ruby">    average_price.round(2)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="60">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="61">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="62">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def average_average_price_per_merchant</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="3" data-linenumber="63">
            <span class="hits">3</span>

            

            

            <code class="ruby">    all_merchants_price_averages = generate_merchant_ids.sum do |id|</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="1425" data-linenumber="64">
            <span class="hits">1425</span>

            

            

            <code class="ruby">      average_item_price_for_merchant(id)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="65">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="3" data-linenumber="66">
            <span class="hits">3</span>

            

            

            <code class="ruby">    all_merchants_average = (all_merchants_price_averages / all_collection_count(@parent.merchants)).round(2)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="67">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="68">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="69">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def mean_prices_per_merchant</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="3" data-linenumber="70">
            <span class="hits">3</span>

            

            

            <code class="ruby">    mean_prices_per_merchant = generate_merchant_ids.map do |id|</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="1425" data-linenumber="71">
            <span class="hits">1425</span>

            

            

            <code class="ruby">      average_item_price_for_merchant(id)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="72">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="73">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="74">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="75">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def golden_items</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="1" data-linenumber="76">
            <span class="hits">1</span>


            

            <code class="ruby">    mean_average_across_all_merchants = average_average_price_per_merchant</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="1" data-linenumber="77">
            <span class="hits">1</span>

            

            

            <code class="ruby">    two_standard_deviations_above_average = (average_average_price_per_merchant * 3) + standard_deviaton_calculation(total(mean_prices_per_merchant, mean_average_across_all_merchants), all_elements_minus_one(mean_prices_per_merchant))</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="1" data-linenumber="78">
            <span class="hits">1</span>

            

            

            <code class="ruby">    expensive_items = @parent.items.all.find_all do |item|</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="1367" data-linenumber="79">
            <span class="hits">1367</span>

            

            

            <code class="ruby">      item.unit_price &gt; two_standard_deviations_above_average</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="80">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="1" data-linenumber="81">
            <span class="hits">1</span>

            

            

            <code class="ruby">    expensive_items</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="82">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="83">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="84">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def all_collection_count(collection)</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="33" data-linenumber="85">
            <span class="hits">33</span>

            

            

            <code class="ruby">    collection.all.length</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="86">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="87">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="88">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def average_invoices_per_merchant</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="6" data-linenumber="89">
            <span class="hits">6</span>

            

            

            <code class="ruby">    (all_collection_count(@parent.invoices) / all_collection_count(@parent.merchants).to_f).round(2)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="90">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="91">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="92">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def invoice_count_per_merchant</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="7" data-linenumber="93">
            <span class="hits">7</span>

            

            

            <code class="ruby">    generate_merchant_ids.map do |id|</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="3325" data-linenumber="94">
            <span class="hits">3325</span>

            

            

            <code class="ruby">      @parent.invoices.find_all_by_merchant_id(id).count</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="95">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="96">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="97">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="98">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def average_invoices_per_merchant_standard_deviation</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="3" data-linenumber="99">
            <span class="hits">3</span>

            

            

            <code class="ruby">    standard_deviaton_calculation(total(invoice_count_per_merchant, average_invoices_per_merchant), all_elements_minus_one(invoice_count_per_merchant))</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="100">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="101">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="102">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def average_invoices_per_day_standard_deviation</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="2" data-linenumber="103">
            <span class="hits">2</span>
            

            

            <code class="ruby">    standard_deviaton_calculation(total(invoices_count_per_day, average_invoices_per_day), all_elements_minus_one(invoices_by_days.values))</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="104">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="105">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="106">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def average_invoices_per_day</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="5" data-linenumber="107">
            <span class="hits">5</span>


            

            <code class="ruby">    (all_collection_count(@parent.invoices) / 7.0).round(2)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="108">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="109">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="110">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def invoices_count_per_day</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="3" data-linenumber="111">
            <span class="hits">3</span>


            

            <code class="ruby">    invoices_by_days.map do |day, invoices|</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="21" data-linenumber="112">
            <span class="hits">21</span>

            

            

            <code class="ruby">      invoices.length</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="113">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="114">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="115">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="116">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def invoices_by_merchant_id</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="950" data-linenumber="117">
            <span class="hits">950</span>

            

            

            <code class="ruby">    @parent.invoices.all.group_by do |id|</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="4735750" data-linenumber="118">
            <span class="hits">4735750</span>

            

            

            <code class="ruby">      id.merchant_id</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="119">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="120">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="121">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="122">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def invoices_by_days</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="9" data-linenumber="123">
            <span class="hits">9</span>

            

            

            <code class="ruby">    @parent.invoices.all.group_by do |invoice|</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="44865" data-linenumber="124">
            <span class="hits">44865</span>

            

            

            <code class="ruby">      if invoice.created_at.wday == 1</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="6264" data-linenumber="125">
            <span class="hits">6264</span>

            

            

            <code class="ruby">        &quot;Monday&quot;</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="38601" data-linenumber="126">
            <span class="hits">38601</span>

            

            

            <code class="ruby">      elsif invoice.created_at.wday == 2</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="6228" data-linenumber="127">
            <span class="hits">6228</span>

            

            

            <code class="ruby">        &quot;Tuesday&quot;</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="32373" data-linenumber="128">
            <span class="hits">32373</span>

            

            

            <code class="ruby">      elsif invoice.created_at.wday == 3</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="6669" data-linenumber="129">
            <span class="hits">6669</span>

            

            

            <code class="ruby">        &quot;Wednesday&quot;</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="25704" data-linenumber="130">
            <span class="hits">25704</span>

            

            

            <code class="ruby">      elsif invoice.created_at.wday == 4</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="6462" data-linenumber="131">
            <span class="hits">6462</span>

            

            

            <code class="ruby">        &quot;Thursday&quot;</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="19242" data-linenumber="132">
            <span class="hits">19242</span>


            

            <code class="ruby">      elsif invoice.created_at.wday == 5</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="6309" data-linenumber="133">
            <span class="hits">6309</span>

            

            

            <code class="ruby">        &quot;Friday&quot;</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="12933" data-linenumber="134">
            <span class="hits">12933</span>

            

            

            <code class="ruby">      elsif invoice.created_at.wday == 6</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="6561" data-linenumber="135">
            <span class="hits">6561</span>

            

            

            <code class="ruby">        &quot;Saturday&quot;</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="6372" data-linenumber="136">
            <span class="hits">6372</span>


            

            <code class="ruby">      elsif invoice.created_at.wday == 0</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="6372" data-linenumber="137">
            <span class="hits">6372</span>

            

            

            <code class="ruby">        &quot;Sunday&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="138">
            
            

            

            <code class="ruby">      end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="139">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="140">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="141">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="142">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def top_merchants_by_invoice_count</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="1" data-linenumber="143">
            <span class="hits">1</span>

            

            

            <code class="ruby">    mean_average_across_all_merchants = average_invoices_per_merchant</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="1" data-linenumber="144">
            <span class="hits">1</span>

            

            

            <code class="ruby">    two_standard_deviations_plus_average = (average_invoices_per_merchant_standard_deviation * 2) + mean_average_across_all_merchants</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="1" data-linenumber="145">
            <span class="hits">1</span>


            

            <code class="ruby">    top_merchants = []</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="1" data-linenumber="146">
            <span class="hits">1</span>

            

            

            <code class="ruby">    generate_merchant_ids.each do |id|</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="475" data-linenumber="147">
            <span class="hits">475</span>


            

            <code class="ruby">      if invoices_by_merchant_id[id].length &gt; two_standard_deviations_plus_average</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="12" data-linenumber="148">
            <span class="hits">12</span>

            

            

            <code class="ruby">        top_merchants &lt;&lt; @parent.merchants.find_by_id(id)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="149">
            
            

            

            <code class="ruby">      end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="150">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="1" data-linenumber="151">
            <span class="hits">1</span>

            

            

            <code class="ruby">    top_merchants</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="152">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="153">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="154">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def bottom_merchants_by_invoice_count</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="1" data-linenumber="155">
            <span class="hits">1</span>


            

            <code class="ruby">    mean_average_across_all_merchants = average_invoices_per_merchant</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="1" data-linenumber="156">
            <span class="hits">1</span>

            

            

            <code class="ruby">    two_standard_deviations_below_average = mean_average_across_all_merchants - (average_invoices_per_merchant_standard_deviation * 2)</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="1" data-linenumber="157">
            <span class="hits">1</span>

            

            

            <code class="ruby">    bottom_merchants = []</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="1" data-linenumber="158">
            <span class="hits">1</span>

            

            

            <code class="ruby">    generate_merchant_ids.each do |id|</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="475" data-linenumber="159">
            <span class="hits">475</span>


            

            <code class="ruby">      if invoices_by_merchant_id[id].length &lt; two_standard_deviations_below_average</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="4" data-linenumber="160">
            <span class="hits">4</span>


            

            <code class="ruby">        bottom_merchants &lt;&lt; @parent.merchants.find_by_id(id)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="161">
            
            

            

            <code class="ruby">      end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="162">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="1" data-linenumber="163">
            <span class="hits">1</span>

            

            

            <code class="ruby">    bottom_merchants</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="164">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="165">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="166">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def top_days_by_invoice_count</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="2" data-linenumber="167">
            <span class="hits">2</span>

            

            

            <code class="ruby">    one_standard_deviation_plus_average = average_invoices_per_day_standard_deviation + average_invoices_per_day</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="2" data-linenumber="168">
            <span class="hits">2</span>

            

            

            <code class="ruby">    top_days = []</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="2" data-linenumber="169">
            <span class="hits">2</span>

            

            

            <code class="ruby">    invoices_by_days.each do |day, invoices|</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="14" data-linenumber="170">
            <span class="hits">14</span>

            

            

            <code class="ruby">      top_days &lt;&lt; day if invoices.length &gt; one_standard_deviation_plus_average</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="171">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="2" data-linenumber="172">
            <span class="hits">2</span>

            

            

            <code class="ruby">    top_days</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="173">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="174">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="175">
            <span class="hits">1</span>


            

            <code class="ruby">  def invoice_status_collection(status)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3" data-linenumber="176">
            <span class="hits">3</span>
            

            

            <code class="ruby">    @parent.invoices.find_all_by_status(status).length</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="177">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="178">
            

            

            

            <code class="ruby">  def invoice_status_collection(status)</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="1" data-linenumber="179">
            <span class="hits">1</span>
            


            

            <code class="ruby">  def invoice_status(status)</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="3" data-linenumber="180">
            <span class="hits">3</span>
            

            

            <code class="ruby">    ((invoice_status_collection(status) / all_collection_count(@parent.invoices).to_f) * 100).round(2)</code>

          </li>
        </div>
      
        <div>

          <li class="never" data-hits="" data-linenumber="181">

            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>

          <li class="never" data-hits="" data-linenumber="182">

            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="1" data-linenumber="183">

            <span class="hits">1</span>
            

            


            <code class="ruby">  def invoice_paid_in_full?(invoice_id)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="184">
            
            

            

            <code class="ruby">    invoice = parent.invoices.find_by_id(invoice_id)</code>

          </li>
        </div>
      
        <div>

          <li class="missed" data-hits="0" data-linenumber="185">

            
            

            

            <code class="ruby">    require &quot;pry&quot;; binding.pry</code>

          </li>
        </div>
      
        <div>

          <li class="never" data-hits="" data-linenumber="186">

            

            


            <code class="ruby">    #i think i&#39;m having trouble unstanding what makes it paid in full or successful</code>

          </li>
        </div>
      
        <div>

          <li class="never" data-hits="" data-linenumber="187">

            
            

            


            <code class="ruby">    #An invoice is considered paid in full if it has a successful transaction</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="188">
            
            

            

            <code class="ruby">    # with invoice_id we would find the transaction</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="189">
            
            

      lines covered
    </h4>


            <code class="ruby">    #use find_by_id to get the invoice object</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="190">
            


    <div class="t-line-summary">
      <b>21</b> relevant lines.
      <span class="green"><b>20</b> lines covered</span> and
      <span class="red"><b>1</b> lines missed.</span>
    </div>


            <code class="ruby">    #check to see if the transaction.result == &quot;success&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="191">
            
            


  </div>


            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="192">
            


            


            <code class="ruby">  end</code>

          </li>
        </div>
      
        <div>

          <li class="never" data-hits="" data-linenumber="193">
            


            


            <code class="ruby"></code>

          </li>
        </div>
      
        <div>

          <li class="never" data-hits="" data-linenumber="194">
            

            

            

            <code class="ruby"></code>

          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="1" data-linenumber="195">

            <span class="hits">1</span>
            

            


            <code class="ruby">  def invoice_total(invoice_id)</code>

          </li>
        </div>
      
        <div>

          <li class="never" data-hits="" data-linenumber="196">
            

            

            


            <code class="ruby">    #quantity * item.price</code>

          </li>
        </div>
      
        <div>

          <li class="never" data-hits="" data-linenumber="197">
            

            

            


            <code class="ruby">    #Failed charges should never be counted in revenue totals or statistics.</code>

          </li>
        </div>
      
        <div>

          <li class="never" data-hits="" data-linenumber="198">
            


            

            <code class="ruby">  end</code>

          </li>
        </div>
      
        <div>

          <li class="never" data-hits="" data-linenumber="199">
            

            

            

            <code class="ruby">end</code>

          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="c37d665d94663d096e5ec6508dbc9d2acf73bb01">
  <div class="header">
    <h3>lib/sales_engine.rb</h3>
    <h4>
      <span class="green">
  100.0%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>21</b> relevant lines.
      <span class="green"><b>21</b> lines covered</span> and
      <span class="red"><b>0</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>

          <li class="covered" data-hits="1" data-linenumber="1">
            <span class="hits">1</span>


            

            <code class="ruby">require_relative &#39;merchant_repository&#39;</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="1" data-linenumber="2">

            <span class="hits">1</span>
            

            


            <code class="ruby">require_relative &#39;item_repository&#39;</code>

          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="1" data-linenumber="3">

            <span class="hits">1</span>
            

            


            <code class="ruby">require_relative &#39;sales_analyst&#39;</code>

          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="1" data-linenumber="4">
            <span class="hits">1</span>

            

            


            <code class="ruby">require_relative &#39;invoice_repository&#39;</code>

          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="1" data-linenumber="5">
            <span class="hits">1</span>

            

            


            <code class="ruby">require_relative &#39;invoice_item_repository&#39;</code>

          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="1" data-linenumber="6">
            <span class="hits">1</span>

            

            

            <code class="ruby">require_relative &#39;customer_repository&#39;</code>

          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="1" data-linenumber="7">
            <span class="hits">1</span>

            

            


            <code class="ruby">require_relative &#39;transaction_repository&#39;</code>

          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="1" data-linenumber="8">
            <span class="hits">1</span>

            

            


            <code class="ruby">require&#39;csv&#39;</code>

          </li>
        </div>
      
        <div>

          <li class="never" data-hits="" data-linenumber="9">

            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="1" data-linenumber="10">

            <span class="hits">1</span>
            

            


            <code class="ruby">class SalesEngine</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="11">
            <span class="hits">1</span>
            

            

            <code class="ruby">  attr_reader :items,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="12">
            
            

            

            <code class="ruby">              :merchants,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="13">
            
            

            

            <code class="ruby">              :invoices,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="14">
            
            

            

            <code class="ruby">              :invoice_items,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="15">
            
            

            

            <code class="ruby">              :customers,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="16">
            
            

            

            <code class="ruby">              :transactions</code>

          </li>
        </div>
      
        <div>

          <li class="never" data-hits="" data-linenumber="17">
            


            


            <code class="ruby"></code>

          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="1" data-linenumber="18">
            <span class="hits">1</span>

            

            

            <code class="ruby">  def initialize(args)</code>

          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="26" data-linenumber="19">
            <span class="hits">26</span>

            

            


            <code class="ruby">    @items         = ItemRepository.new(args[:items], self)</code>

          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="26" data-linenumber="20">
            <span class="hits">26</span>

            

            


            <code class="ruby">    @merchants     = MerchantRepository.new(args[:merchants], self)</code>

          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="26" data-linenumber="21">
            <span class="hits">26</span>

            

            

            <code class="ruby">    @invoices      = InvoiceRepository.new(args[:invoices], self)</code>

          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="26" data-linenumber="22">
            <span class="hits">26</span>

            

            

            <code class="ruby">    @invoice_items   = InvoiceItemRepository.new(args[:invoice_items], self)</code>

          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="26" data-linenumber="23">
            <span class="hits">26</span>

            

            

            <code class="ruby">    @customers     = CustomerRepository.new(args[:customers], self)</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="26" data-linenumber="24">
            <span class="hits">26</span>

            

            

            <code class="ruby">    @transactions   = TransactionRepository.new(args[:transactions], self)</code>
          </li>
        </div>
      
        <div>

          <li class="never" data-hits="" data-linenumber="25">
            

            

            


            <code class="ruby">  end</code>

          </li>
        </div>
      
        <div>

          <li class="never" data-hits="" data-linenumber="26">
            

            

            


            <code class="ruby"></code>

          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="1" data-linenumber="27">
            <span class="hits">1</span>


            


            <code class="ruby">  def self.from_csv(args)</code>

          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="26" data-linenumber="28">
            <span class="hits">26</span>

            

            


            <code class="ruby">    new(args)</code>

          </li>
        </div>
      
        <div>

          <li class="never" data-hits="" data-linenumber="29">
            

            

            

            <code class="ruby">  end</code>

          </li>
        </div>
      
        <div>

          <li class="never" data-hits="" data-linenumber="30">

            
            

            


            <code class="ruby"></code>

          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="1" data-linenumber="31">
            <span class="hits">1</span>

            

            


            <code class="ruby">  def analyst</code>

          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="26" data-linenumber="32">
            <span class="hits">26</span>

            

            

            <code class="ruby">    SalesAnalyst.new(self)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="33">
            
            


      
        <div class="source_table" id="57257d889fbc05552326bfb53e1574c95f376825">
  <div class="header">
    <h3>lib/transaction.rb</h3>
    <h4>
      <span class="red">
  76.47%
</span>


            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="34">
            

            

            


            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>


      
        <div class="source_table" id="57257d889fbc05552326bfb53e1574c95f376825">
  <div class="header">
    <h3>lib/transaction.rb</h3>
    <h4>
      <span class="red">
  76.47%
</span>


      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>17</b> relevant lines.
      <span class="green"><b>13</b> lines covered</span> and
      <span class="red"><b>4</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            <span class="hits">1</span>

            

            


            <code class="ruby">class Transaction</code>

          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="1" data-linenumber="2">
            <span class="hits">1</span>

            

            


            <code class="ruby">  attr_reader :id,</code>

          </li>
        </div>
      
        <div>

          <li class="never" data-hits="" data-linenumber="3">

            
            

            


            <code class="ruby">              :invoice_id,</code>

          </li>
        </div>
      
        <div>

          <li class="never" data-hits="" data-linenumber="4">

            
            

            


            <code class="ruby">              :credit_card_number,</code>

          </li>
        </div>
      
        <div>

          <li class="never" data-hits="" data-linenumber="5">

            
            

            


            <code class="ruby">              :credit_card_expiration_date,</code>

          </li>
        </div>
      
        <div>

          <li class="never" data-hits="" data-linenumber="6">

            
            

            

            <code class="ruby">              :result,</code>

          </li>
        </div>
      
        <div>

          <li class="never" data-hits="" data-linenumber="7">

            

            


            <code class="ruby">              :created_at,</code>

          </li>
        </div>
      
        <div>

          <li class="never" data-hits="" data-linenumber="8">

            
            

            

            <code class="ruby">              :updated_at,</code>
          </li>
        </div>
      
        <div>

          <li class="never" data-hits="" data-linenumber="9">
            


            


            <code class="ruby">              :parent</code>

          </li>
        </div>
      
        <div>

          <li class="never" data-hits="" data-linenumber="10">
            

            

            

            <code class="ruby"></code>

          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="1" data-linenumber="11">
            <span class="hits">1</span>

            

            


            <code class="ruby">  def initialize(args, parent)</code>

          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="129610" data-linenumber="12">
            <span class="hits">129610</span>

            

            

            <code class="ruby">    @args                        = args</code>

          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="129610" data-linenumber="13">
            <span class="hits">129610</span>

            

            


            <code class="ruby">    @id                          = args[:id].to_i</code>

          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="129610" data-linenumber="14">
            <span class="hits">129610</span>

            

            


            <code class="ruby">    @invoice_id                  = args[:invoice_id].to_i</code>

          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="129610" data-linenumber="15">
            <span class="hits">129610</span>

            

            


            <code class="ruby">    @credit_card_number          = args[:credit_card_number].to_s</code>

          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="129610" data-linenumber="16">
            <span class="hits">129610</span>

            

            


            <code class="ruby">    @credit_card_expiration_date = args[:credit_card_expiration_date].to_s</code>

          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="129610" data-linenumber="17">
            <span class="hits">129610</span>

            

            


            <code class="ruby">    @result                      = args[:result].to_sym</code>

          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="129610" data-linenumber="18">
            <span class="hits">129610</span>


            

            <code class="ruby">    @created_at                  = Time.parse(args[:created_at].to_s)</code>

          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="129610" data-linenumber="19">
            <span class="hits">129610</span>


            

            <code class="ruby">    @updated_at                  = Time.parse(args[:updated_at].to_s)</code>

          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="129610" data-linenumber="20">
            <span class="hits">129610</span>

            

            

            <code class="ruby">    @parent                      = parent</code>

          </li>
        </div>
      
        <div>

          <li class="never" data-hits="" data-linenumber="21">
            

            

            

            <code class="ruby">  end</code>

          </li>
        </div>
      
        <div>

          <li class="never" data-hits="" data-linenumber="22">

            
            

            


            <code class="ruby"></code>

          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="1" data-linenumber="23">
            <span class="hits">1</span>

            

            


            <code class="ruby">  def update(args)</code>

          </li>
        </div>
      
        <div>

          <li class="missed" data-hits="0" data-linenumber="24">

            
            

            


            <code class="ruby">    @credit_card_number = (args[:credit_card_number].to_s) if !args[:credit_card_number].nil?</code>

          </li>
        </div>
      
        <div>

          <li class="missed" data-hits="0" data-linenumber="25">

            
            

            


            <code class="ruby">    @credit_card_expiration_date = (args[:credit_card_expiration_date].to_s) if !args[:credit_card_expiration_date].nil?</code>

          </li>
        </div>
      
        <div>

          <li class="missed" data-hits="0" data-linenumber="26">

            
            

            


            <code class="ruby">    @result = (args[:result].to_sym) if !args[:result].nil?</code>

          </li>
        </div>
      
        <div>

          <li class="missed" data-hits="0" data-linenumber="27">

            

            


            <code class="ruby">    @updated_at  = Time.now</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="28">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="29">
            


      lines covered
    </h4>


            <code class="ruby">end</code>
          </li>
        </div>

      
    </ol>
  </pre>
</div>

      
        <div class="source_table" id="c2130b102496dd67cf14334182df3c2805e31009">
  <div class="header">
    <h3>lib/transaction_repository.rb</h3>
    <h4>
      <span class="red">
  50.0%
</span>

      lines covered
    </h4>

    

    <div class="t-line-summary">
      <b>46</b> relevant lines.
      <span class="green"><b>23</b> lines covered</span> and
      <span class="red"><b>23</b> lines missed.</span>
    </div>

    

  </div>

  <pre>
    <ol>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            <span class="hits">1</span>
            

            

            <code class="ruby">require_relative &#39;transaction&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="2">
            <span class="hits">1</span>
            

            

            <code class="ruby">require &#39;time&#39;</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="3">
            <span class="hits">1</span>
            

            

            <code class="ruby">require &quot;csv&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="4">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="5">
            <span class="hits">1</span>
            

            

            <code class="ruby">class TransactionRepository</code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="6">
            <span class="hits">1</span>
            

            

            <code class="ruby">  attr_reader :filename,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="7">
            
            

            

            <code class="ruby">              :parent,</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="8">
            
            

            

            <code class="ruby">              :transactions</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="9">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="10">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def initialize(filename, parent)</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="26" data-linenumber="11">
            <span class="hits">26</span>


            

            <code class="ruby">    @filename = filename</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="26" data-linenumber="12">
            <span class="hits">26</span>


            

            <code class="ruby">    @parent = parent</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="26" data-linenumber="13">
            <span class="hits">26</span>


            

            <code class="ruby">    @transactions = Array.new</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="26" data-linenumber="14">
            <span class="hits">26</span>

            

            

            <code class="ruby">    generate_transactions(filename)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="15">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="16">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="17">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def inspect</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="18">
            
            

            

            <code class="ruby">    &quot;#&lt;#{self.class} #{@transactions.size} rows&gt;&quot;</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="19">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="20">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="21">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def generate_transactions(filename)</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="26" data-linenumber="22">
            <span class="hits">26</span>

            

            

            <code class="ruby">    transactions = CSV.open filename, headers: true, header_converters: :symbol</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="26" data-linenumber="23">
            <span class="hits">26</span>

            

            

            <code class="ruby">    transactions.each do |row|</code>
          </li>
        </div>
      
        <div>

          <li class="covered" data-hits="129610" data-linenumber="24">
            <span class="hits">129610</span>

            

            

            <code class="ruby">      @transactions &lt;&lt; Transaction.new(row, self)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="25">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="26">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="27">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="28">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def all</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="29">
            
            

            

            <code class="ruby">    @transactions</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="30">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="31">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="32">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def find_by_id(id)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="33">
            
            

            

            <code class="ruby">    @transactions.find do |transaction|</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="34">
            
            

            

            <code class="ruby">      transaction.id.to_i == id</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="35">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="36">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="37">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="38">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def find_all_by_invoice_id(invoice_id)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="39">
            
            

            

            <code class="ruby">    @transactions.find_all do |transaction|</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="40">
            
            

            

            <code class="ruby">     transaction.invoice_id == invoice_id</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="41">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="42">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="43">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="44">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def find_all_by_credit_card_number(credit_card_number)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="45">
            
            

            

            <code class="ruby">    @transactions.find_all do |transaction|</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="46">
            
            

            

            <code class="ruby">     transaction.credit_card_number.downcase.include?(credit_card_number.downcase)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="47">
            
            

            

            <code class="ruby">   end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="48">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="49">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="50">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def find_all_by_result(result)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="51">
            
            

            

            <code class="ruby">    @transactions.find_all do |transaction|</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="52">
            
            

            

            <code class="ruby">     transaction.result == result</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="53">
            
            

            

            <code class="ruby">    end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="54">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="55">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="56">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def create(attributes)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="57">
            
            

            

            <code class="ruby">    id = @transactions[-1].id.to_i</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="58">
            
            

            

            <code class="ruby">    id += 1</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="59">
            
            

            

            <code class="ruby">    id = id.to_i</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="60">
            
            

            

            <code class="ruby">    attributes[:id] = id</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="61">
            
            

            

            <code class="ruby">    transaction = Transaction.new(attributes, self)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="62">
            
            

            

            <code class="ruby">    @transactions &lt;&lt; transaction</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="63">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="64">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="65">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def update(id, attributes)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="66">
            
            

            

            <code class="ruby">    update_transaction = find_by_id(id)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="67">
            
            

            

            <code class="ruby">    update_transaction.update(attributes) if !attributes[:credit_card_number].nil?</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="68">
            
            

            

            <code class="ruby">    update_transaction.update(attributes) if !attributes[:credit_card_expiration_date].nil?</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="69">
            
            

            

            <code class="ruby">    update_transaction.update(attributes) if !attributes[:result].nil?</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="70">
            
            

            

            <code class="ruby">    update_transaction</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="71">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="72">
            
            

            

            <code class="ruby"></code>
          </li>
        </div>
      
        <div>
          <li class="covered" data-hits="1" data-linenumber="73">
            <span class="hits">1</span>
            

            

            <code class="ruby">  def delete(id)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="74">
            
            

            

            <code class="ruby">    delete = find_by_id(id)</code>
          </li>
        </div>
      
        <div>
          <li class="missed" data-hits="0" data-linenumber="75">
            
            

            

            <code class="ruby">    @transactions.delete(delete)</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="76">
            
            

            

            <code class="ruby">  end</code>
          </li>
        </div>
      
        <div>
          <li class="never" data-hits="" data-linenumber="77">
            
            

            

            <code class="ruby">end</code>
          </li>
        </div>
      
    </ol>
  </pre>
</div>

      
      </div>
    </div>
  </body>
</html>
