The most sold item for merchant method requires collecting the quantity sold of specific items. The only place where this information lives is in the invoice item class. To link an instance of an invoice item to a merchant we have to use it’s item id as it doesn’t know which merchant it belongs to. We can find all items belonging to a merchant using the method in the item repository we created to match items to their merchants. The collection of items is then used to find all instances of invoice items that reference them using the invoice item repository class method ‘find_all_by_item_id’. We then use the fact that the instances of  invoice items contain both item id’s and quantity sold to create an array of arrays; each sub-array contains an item id and a total quantity of that item sold.
	With access to all total quantities for all of that merchants items we can find the largest quantity among all the items. We use this maximum quantity to collect all items that sold that amount. Finally we pass these item ids through the item repository class to collect an array of item instances.

For our best item for merchant method first, we find all the invoices that a merchant has by their id. We then sort through all the invoices a merchant has by the invoice id and find all of them that are paid in full. Then we create an array consisting of every instance of an invoice item associated with every invoice paid in full for a given merchant.
 Next we sort through every invoice paid in full for a given merchant and create a hash. To do so, we ask if the given invoice id is already a key,  if it is not it creates a key and it also sets the value of that key equal to the quantity of the invoice item multiplied by the unit price in dollars of the invoice item. If the key does exist it adds to the value of the given key the invoice item quantity multiplied by the unit price in dollars of the unit price item. Then, it turns our newly made hash in its entirety into an array of arrays, where the item id is paired with its value total.
Lastly, we iterate over our newly made array and find the max item id by revenue and make a collection of them. With that collection we can then find the item id associated with the returned array. From there we look up the item instance and return it.
